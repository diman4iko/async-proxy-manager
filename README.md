# Async Proxy Manager

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ–∫—Å–∏ –¥–ª—è Python —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `aiohttp` –∏ `httpx`. –°–¥–µ–ª–∞–Ω –∑–∞ –ø–∞—Ä—É –¥–Ω–µ–π, –º–æ–∂–µ—Ç –ø–æ–º–æ–∂–µ—Ç –∫–æ–º—É-—Ç–æ)!

## ‚ö†Ô∏è –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–ß–µ—Å—Ç–Ω–æ –≥–æ–≤–æ—Ä—è, –ø—Ä–æ–µ–∫—Ç –Ω–µ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω –∏ –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤:**

- üêõ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç unit-—Ç–µ—Å—Ç—ã
- üìö **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ú–Ω–æ–≥–∏–µ –º–µ—Ç–æ–¥—ã –Ω–µ –∏–º–µ—é—Ç docstrings
- üéØ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –§–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∫—Å–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- üß© **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–∫—Å–∏ —Å–ª–æ–∂–Ω–æ

**–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–º–æ—á—å —Å –¥–æ—Ä–∞–±–æ—Ç–∫–æ–π - –±—É–¥—É —Ä–∞–¥ –ø—É–ª–ª-—Ä–µ–∫–≤–µ—Å—Ç–∞–º! –û—Å–æ–±–µ–Ω–Ω–æ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å:**

- –ù–∞–ø–∏—Å–∞–Ω–∏–µ–º —Ç–µ—Å—Ç–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –æ—á–µ—Ä–µ–¥–µ–π
- –£–ª—É—á—à–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üîß –î–≤–æ–π–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - `aiohttp` –∏ `httpx` –∫–ª–∏–µ–Ω—Ç—ã
- **üéØ –£–º–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏** - —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∏ –±–µ–∑
- **üõ°Ô∏è SOCKS5 –ø—Ä–æ–∫—Å–∏** - –ø–æ–ª–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **‚è±Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - –∫–æ–Ω—Ç—Ä–æ–ª—å —á–∞—Å—Ç–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- **üöÄ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ async/await

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install aiohttp httpx aiohttp-socks

## –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
```
from .proxy_controller import ProxyController, HttpClientType

# –ú–µ–Ω–µ–¥–∂–µ—Ä —Å —É—Å–ª–æ–≤–∏—è–º–∏
proxy_manager = await ProxyController.create_with_conditions(
    http_client=HttpClientType.httpx,
    with_check=True
)
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏
```
await proxy_manager.add_proxy(
    "192.168.1.1:1080:user:pass",
    conditions={"country": "US", "provider": "premium"}
)
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```
async with proxy_manager.acquire(
    task_key="web_scraping",
    time_condition=5.0,
    other_conditions={"country": "US"}
) as proxy_session:
    
    # –î–ª—è httpx
    response = await proxy_session.session.get("https://api.example.com/data")
```

## –†–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏
```
# –í–µ–±-—Å–∫—Ä–∞–ø–∏–Ω–≥ - —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
async with proxy_manager.acquire(
    task_key="web_crawler",
    time_condition=2.0,
    other_conditions={"country": "US"}
) as proxy:
    pass

# API –≤—ã–∑–æ–≤—ã - —Ä–µ–¥–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã  
async with proxy_manager.acquire(
    task_key="api_client", 
    time_condition=10.0,
    other_conditions={"country": "DE"}
) as proxy:
    pass
```

## –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∫—Å–∏
```
is_working = await proxy_manager.manually_check_proxy("192.168.1.1:1080:user:pass")
```
